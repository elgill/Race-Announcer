<div>
  <h2>Import Runners</h2>

  <input type="file" (change)="onFileSelected($event)" accept=".csv">

  @if (headers.length) {
    <div>
      <h3>Column Mapping</h3>
      <div class="mapping-grid">
        @for (header of headers; track header) {
          <div class="mapping-row">
            <label class="mapping-label">{{ header }}</label>
            <select class="mapping-select" [(ngModel)]="mappedColumns[header]">
              <option value="">-</option>
              <option value="bib">Bib Number</option>
              <option value="firstName">First Name</option>
              <option value="lastName">Last Name</option>
              <option value="age">Age</option>
              <option value="gender">Gender</option>
              <option value="town">Town</option>
              <option value="state">State</option>
              @for (field of settings.customFields; track field) {
                <option [value]="field.name">{{field.name}}</option>
              }
            </select>
          </div>
        }
      </div>
      <button (click)="importCsv()">Import</button>
    </div>
  }
  @if (importStatus === 'success') {
    <p class="success-message">Import successful!</p>
  }
  <p class="error-message">{{ errorMessage }}</p>
</div>
